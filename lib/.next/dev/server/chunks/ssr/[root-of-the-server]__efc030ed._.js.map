{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/darrel/School/Cryptography/SemProject1/Proj1_Starter/lib/app/page.jsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport Field from \"../ui/Field\";\nconst { Keychain } = require(\"../../password-manager.js\");\n\nconst test = [\n  '{\"kvs\":{\"tVFlxWFM1eTTGEpYsVCBlRuJ3higOf7mhuu9BzOxHgA=\":{\"iv\":\"fdH26skhEWLslxRt\",\"ct\":\"R1HHHQKR+lugNVvM36UVOomUP+m2gQNQ3n5KWjE3bVnxZ82QjcGrTWhhAN73U7LTXZxQ96/UJ5XFIaDCRtMvC30TCVxRHscLvDbM8Yk4sQZ5\"},\"cveydU05Tg/CqPqB4jB9eRuqRW2zedubLv2Wo0+T9aw=\":{\"iv\":\"ZwZNo/vh7tCLloU8\",\"ct\":\"QhRBxA/Y6uxJJsKPCnPl9mu/WxaxNC0QuzDAHrcftk7TasqnvBBWYXjRbrq8nPxSxJ+jq/F6CMwoJ2mBHJ9N83pGJ6wSugZj/6Xeifny5A1J\"},\"CirRlMqSTV6z11WPKyGBVqgN4JuuTp1OqgMadkwJbM8=\":{\"iv\":\"Y3pGjgiDGcAImWrz\",\"ct\":\"lUnEEP/QECE6RvtfKpBsfcFTZRnBrN0ScBER2PkUC3mXX10GQ2GhxnuiGcymU3M2YyyW1zOy2Ia/ldSfgqA3mnkaX/asTdbXu4uEtoDiIMd+\"}},\"salt\":\"lTa5dQBqzQrsJVkXvKA1RA==\",\"verifyTag\":\"bD1cUUcGwJ699e8g7hrcOqpSFyEYMcp4PZDA8fez50A=\"}',\n  \"lIYG+tjo0uXHo5Gp4mtQCxME8imkTDELLuOPOo4ku9M=\",\n];\n\nexport default function Page() {\n  var baseKvs = {};\n  const [search, setSearch] = useState(\"\");\n  const [ready, setReady] = useState(false);\n  const [updated, setUpdated] = useState(false);\n  const [kvs, setKvs] = useState();\n  const [result, setResult] = useState([]);\n  const [addDomain, setAddDomain] = useState([]);\n  const [addPassword, setAddPassword] = useState([]);\n  const [searchFailed, setSearchFailed] = useState(false);\n  const [masterPass, setMasterPass] = useState(\"\");\n  const [masterValid, setMasterValid] = useState(true);\n\n  function handleChange(event) {\n    setSearch(event.target.value);\n  }\n  function handleMasterPass(event) {\n    setMasterPass(event.target.value);\n  }\n  function handleAddDomain(event) {\n    setAddDomain(event.target.value);\n  }\n  function handleAddPassword(event) {\n    setAddPassword(event.target.value);\n  }\n\n  function sleep(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  function deleteEntry(domain) {\n    baseKvs = kvs;\n    baseKvs.remove(domain);\n    setKvs(baseKvs);\n  }\n\n  function addSubmit(event) {\n    event.preventDefault();\n    baseKvs = kvs;\n    console.log(Object.keys(baseKvs.data.kvs).length);\n    baseKvs.set(addDomain, addPassword).then(() => {\n      setKvs(baseKvs);\n      console.log(Object.keys(baseKvs.data.kvs).length);\n      setUpdated(true);\n      setAddPassword(\"\");\n      setAddDomain(\"\");\n      sleep(2000).then(() => {\n        setUpdated(false);\n      });\n    });\n  }\n\n  function searchSubmit(event) {\n    event.preventDefault();\n    kvs.get(search).then((data) => {\n      if (data == null) {\n        setSearchFailed(true);\n        setResult([]);\n      } else {\n        setResult([search, data]);\n        setSearchFailed(false);\n      }\n    });\n    console.log(result);\n  }\n  function auth(event) {\n    event.preventDefault();\n    try {\n      baseKvs = Keychain.load(masterPass, test[0], test[1]).then((data) => {\n        setKvs(data);\n        setReady(true);\n      });\n    } catch {\n      setReady(false);\n      setMasterValid(false);\n    }\n  }\n  useEffect(() => {\n    const decryptAsync = async () => {};\n    decryptAsync();\n  }, []);\n  return ready ? (\n    <main className=\"flex flex-row justify-center w-screen pt-16 space-y-8\">\n      <div className=\"w-1/2 space-y-4\">\n        <h1 className=\"text-3xl font-semibold text-[#4F39F6]\">Secure Vault</h1>\n        <form action=\"\" className=\"space-y-4\" onSubmit={addSubmit}>\n          <h1 className=\"text-2xl font-medium\">Add or update domain</h1>\n          <div className=\"flex flex-row space-x-3\">\n            <div className=\"flex flex-col space-y-2 w-full\">\n              <label htmlFor=\"domain\">Domain:</label>\n              <input\n                type=\"text\"\n                value={addDomain}\n                onChange={handleAddDomain}\n                placeholder=\"Enter new or existing domain\"\n                required\n                className=\"rounded-md px-2 py-2 bg-gray-100 border border-gray-200 w-full\"\n              />\n            </div>\n            <div className=\"flex flex-col space-y-2 w-full\">\n              <label htmlFor=\"password\">Password:</label>\n              <input\n                type=\"password\"\n                value={addPassword}\n                onChange={handleAddPassword}\n                placeholder=\"Enter password\"\n                required\n                className=\"rounded-md px-2 py-2 bg-gray-100 border border-gray-200 w-full\"\n              />\n            </div>\n          </div>\n          <button className=\"text-white bg-[#4F39F6] px-3 py-3 w-full rounded-md\">\n            Add or update domain details\n          </button>\n          {updated ? (\n            <p className=\"text-green-400\">\n              The domain and password was added successfully\n            </p>\n          ) : (\n            <div></div>\n          )}\n        </form>\n        <form action=\"\" onSubmit={searchSubmit}>\n          <h1 className=\"text-2xl font-medium\">Retrieve password</h1>\n          <div className=\"flex flex-col space-y-2\">\n            <label htmlFor=\"domain\">Enter the domain:</label>\n            <div className=\"flex flex-row space-x-3 items-center\">\n              <input\n                type=\"text\"\n                placeholder=\"www.example.com\"\n                required\n                value={search}\n                onChange={handleChange}\n                className=\"rounded-md px-2 py-2 bg-gray-100 border border-gray-200 w-full\"\n              />\n              <button className=\"w-fit text-nowrap px-2 py-3 text-white bg-[#4F39F6] rounded-md\">\n                Get password\n              </button>\n            </div>\n          </div>\n        </form>\n        {searchFailed ? (\n          <p className=\"text-red-500\">\n            No such domain exists in the key value store\n          </p>\n        ) : (\n          <div></div>\n        )}\n        <div>\n          <div className=\"font-semibold flex flex-row text-xl\">\n            <p className=\"w-1/2\">Domain</p>\n            <p className=\"w-1/2\">Password</p>\n          </div>\n          {result.length > 1 ? (\n            <Field\n              domain={result[0]}\n              password={result[1]}\n              deleteEntry={deleteEntry}\n            />\n          ) : (\n            <br />\n          )}\n        </div>\n      </div>\n    </main>\n  ) : (\n    <main className=\"flex flex-row items-center justify-center w-screen h-screen \">\n      <div className=\"shadow-[#4F39F6] border border-[#4F39F6] rounded-xl shadow-lg py-16 px-12 w-3/12\">\n        <h1 className=\"font-bold text-[#4F39F6] text-2xl text-center pb-16 pt-1\">\n          Secure Vault\n        </h1>\n        <form className=\"flex flex-col space-y-8\" onSubmit={auth}>\n          <div className=\"flex flex-col space-y-2\">\n            <label>Master password :</label>\n            <input\n              type=\"password\"\n              className=\"border outline-[#4F39F6] focus:border-[#4F39F6] px-2 py-3 rounded-md\"\n              placeholder=\"Enter master password\"\n              value={masterPass}\n              onChange={handleMasterPass}\n            />\n          </div>\n          <p className=\"text-red-500\">Wrong password. Retry.</p>\n          <button\n            className=\"bg-[#4F39F6] text-white w-full rounded-md py-3\"\n            type=\"submit\"\n          >\n            Unlock Vault\n          </button>\n        </form>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 447, "column": 0}, "map": {"version":3,"sources":["file:///home/darrel/School/Cryptography/SemProject1/Proj1_Starter/lib/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 466, "column": 0}, "map": {"version":3,"sources":["file:///home/darrel/School/Cryptography/SemProject1/Proj1_Starter/lib/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 471, "column": 0}, "map": {"version":3,"sources":["file:///home/darrel/School/Cryptography/SemProject1/Proj1_Starter/lib/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}